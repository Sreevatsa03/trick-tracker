{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\nvar _tsEbml = require(\"ts-ebml\");\nvar _unsupportedView = _interopRequireDefault(require(\"./defaults/unsupported-view\"));\nvar _errorView = _interopRequireDefault(require(\"./defaults/error-view\"));\nvar _disconnectedView = _interopRequireDefault(require(\"./defaults/disconnected-view\"));\nvar _loadingView = _interopRequireDefault(require(\"./defaults/loading-view\"));\nvar _switchCameraView = _interopRequireDefault(require(\"./defaults/switch-camera-view\"));\nvar _renderActions = _interopRequireDefault(require(\"./defaults/render-actions\"));\nvar _getVideoInfo = _interopRequireWildcard(require(\"./get-video-info\"));\nvar _customErrors = require(\"./custom-errors\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n  return cache;\n}\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n  var cache = _getRequireWildcardCache();\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj[\"default\"] = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nvar MIME_TYPES = ['video/webm;codecs=\"vp8,opus\"', 'video/webm;codecs=h264', 'video/webm;codecs=vp9', 'video/webm', 'video/mp4'];\nvar CONSTRAINTS = {\n  audio: true,\n  video: true\n};\nvar Wrapper = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"video-recorder__Wrapper\",\n  componentId: \"sc-7k20rv-0\"\n})([\"position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;overflow:hidden;min-height:300px;background-color:#000;color:white;box-sizing:border-box;*{box-sizing:inherit;}\"]);\nvar CameraView = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"video-recorder__CameraView\",\n  componentId: \"sc-7k20rv-1\"\n})([\"width:100%;height:100%;\"]);\nvar Video = _styledComponents[\"default\"].video.withConfig({\n  displayName: \"video-recorder__Video\",\n  componentId: \"sc-7k20rv-2\"\n})([\"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-height:100%;min-width:100%;width:100%;height:100%;object-fit:cover;\", \";\", \";\"], function (props) {\n  return props.isFlipped && (0, _styledComponents.css)([\"transform:translate(-50%,-50%) scaleX(-1);\"]);\n}, function (props) {\n  return props.onClick && (0, _styledComponents.css)([\"cursor:pointer;\"]);\n});\nvar VideoRecorder = /*#__PURE__*/function (_Component) {\n  _inherits(VideoRecorder, _Component);\n  var _super = _createSuper(VideoRecorder);\n  function VideoRecorder() {\n    var _this;\n    _classCallCheck(this, VideoRecorder);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"videoInput\", /*#__PURE__*/_react[\"default\"].createRef());\n    _defineProperty(_assertThisInitialized(_this), \"isComponentUnmounted\", false);\n    _defineProperty(_assertThisInitialized(_this), \"timeSinceInactivity\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isRecording: false,\n      isCameraOn: false,\n      isConnecting: false,\n      isReplayingVideo: false,\n      isReplayVideoMuted: true,\n      thereWasAnError: false,\n      error: null,\n      streamIsReady: false,\n      isInlineRecordingSupported: null,\n      isVideoInputSupported: null,\n      stream: undefined,\n      currentDeviceId: null,\n      availableDeviceIds: []\n    });\n    _defineProperty(_assertThisInitialized(_this), \"turnOnCamera\", function () {\n      var deviceId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (_this.props.onTurnOnCamera) {\n        _this.props.onTurnOnCamera();\n      }\n      navigator.mediaDevices.enumerateDevices().then(function (mediaDevices) {\n        var videoDevices = mediaDevices.filter(function (x) {\n          return x.kind === 'videoinput';\n        });\n        if (deviceId && videoDevices[0] && videoDevices.find(function (x) {\n          return x.deviceId;\n        }) === undefined) {\n          return _this.handleError(new _customErrors.ReactVideoRecorderDeviceUnavailableError());\n        }\n        var currentDeviceId = typeof deviceId === 'string' ? deviceId : videoDevices[0].deviceId;\n        _this.setState({\n          isConnecting: true,\n          isReplayingVideo: false,\n          thereWasAnError: false,\n          currentDeviceId: currentDeviceId,\n          availableDeviceIds: videoDevices.map(function (x) {\n            return x.deviceId;\n          }),\n          error: null\n        });\n        var fallbackContraints = {\n          audio: true,\n          video: true\n        };\n        var currentConstraints = _objectSpread(_objectSpread({}, _this.props.constraints), {}, {\n          video: {\n            deviceId: {\n              exact: currentDeviceId\n            }\n          }\n        });\n        navigator.mediaDevices.getUserMedia(currentConstraints)[\"catch\"](function (err) {\n          // there's a bug in chrome in some windows computers where using `ideal` in the constraints throws a NotReadableError\n          if (err.name === 'NotReadableError' || err.name === 'OverconstrainedError') {\n            console.warn(\"Got \".concat(err.name, \", trying getUserMedia again with fallback constraints\"));\n            return navigator.mediaDevices.getUserMedia(fallbackContraints);\n          }\n          throw err;\n        }).then(_this.handleSuccess)[\"catch\"](_this.handleError);\n      })[\"catch\"](_this.handleError);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleSwitchCamera\", function () {\n      if (_this.props.onSwitchCamera) {\n        _this.props.onSwitchCamera();\n      }\n      var _this$state = _this.state,\n        currentDeviceId = _this$state.currentDeviceId,\n        availableDeviceIds = _this$state.availableDeviceIds; // Stop media tracks\n\n      _this.stream && _this.stream.getTracks().forEach(function (stream) {\n        return stream.stop();\n      });\n      var index = availableDeviceIds.findIndex(function (x) {\n        return x === currentDeviceId;\n      });\n      var maxIndex = availableDeviceIds.length - 1;\n      if (index < 0) {\n        return _this.handleError(new _customErrors.ReactVideoRecorderDeviceUnavailableError());\n      }\n      if (index + 1 > maxIndex) return _this.turnOnCamera(availableDeviceIds[0]);\n      return _this.turnOnCamera(availableDeviceIds[index + 1]);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"turnOffCamera\", function () {\n      if (_this.props.onTurnOffCamera) {\n        _this.props.onTurnOffCamera();\n      }\n      _this.stream && _this.stream.getTracks().forEach(function (stream) {\n        return stream.stop();\n      });\n      _this.setState({\n        isCameraOn: false\n      });\n      clearInterval(_this.inactivityTimer);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleSuccess\", function (stream) {\n      // Since handleSuccess is an async function, we may be in a situation where this was called after the\n      // component was unmounted\n      if (_this.isComponentUnmounted) {\n        return;\n      }\n      _this.stream = stream;\n      _this.setState({\n        isCameraOn: true,\n        stream: stream\n      });\n      if (_this.props.onCameraOn) {\n        _this.props.onCameraOn();\n      }\n      if (window.URL) {\n        _this.cameraVideo.srcObject = stream;\n      } else {\n        _this.cameraVideo.src = stream;\n      } // there is probably a better way\n      // but this makes sure the start recording button\n      // gives the stream a couple miliseconds to be ready\n\n      setTimeout(function () {\n        _this.setState({\n          isConnecting: false,\n          streamIsReady: true\n        });\n      }, 200);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleError\", function (err) {\n      var onError = _this.props.onError;\n      if (onError) {\n        onError(err);\n      }\n      if (_this.isComponentUnmounted) {\n        return;\n      }\n      console.error('Captured error', err);\n      clearTimeout(_this.timeLimitTimeout);\n      _this.setState({\n        isConnecting: _this.state.isConnecting && false,\n        isRecording: false,\n        thereWasAnError: true,\n        error: err\n      });\n      if (_this.state.isCameraOn) {\n        _this.turnOffCamera();\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleDataIssue\", function (event) {\n      var error = new _customErrors.ReactVideoRecorderDataIssueError(event);\n      console.error(error.message, event);\n      _this.handleError(error);\n      return false;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getMimeType\", function () {\n      if (_this.props.mimeType) {\n        return _this.props.mimeType;\n      }\n      var mimeType = window.MediaRecorder.isTypeSupported ? MIME_TYPES.find(window.MediaRecorder.isTypeSupported) : 'video/webm';\n      return _this.mediaRecorder && _this.mediaRecorder.mimeType || mimeType || '';\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isDataHealthOK\", function (event) {\n      if (!event.data) return _this.handleDataIssue(event);\n      var chunkSize = _this.props.chunkSize;\n      var dataCheckInterval = 2000 / chunkSize; // in some browsers (FF/S), data only shows up\n      // after a certain amount of time ~everyt 2 seconds\n\n      var blobCount = _this.recordedBlobs.length;\n      if (blobCount > dataCheckInterval && blobCount % dataCheckInterval === 0) {\n        var blob = new window.Blob(_this.recordedBlobs, {\n          type: _this.getMimeType()\n        });\n        if (blob.size <= 0) return _this.handleDataIssue(event);\n      }\n      return true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"tryToUnmuteReplayVideo\", function () {\n      var video = _this.replayVideo;\n      video.muted = false;\n      var playPromise = video.play();\n      if (!playPromise) {\n        video.muted = true;\n        return;\n      }\n      playPromise.then(function () {\n        _this.setState({\n          isReplayVideoMuted: false\n        }); // fixes bug where seeking control during autoplay is not available until the video is almost completely played through\n\n        if (_this.props.replayVideoAutoplayAndLoopOff) {\n          video.pause();\n          video.loop = false;\n        }\n      })[\"catch\"](function (err) {\n        console.warn('Could not autoplay replay video', err);\n        video.muted = true;\n        return video.play();\n      })[\"catch\"](function (err) {\n        console.warn('Could play muted replay video after failed autoplay', err);\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleDataAvailable\", function (event) {\n      if (_this.isDataHealthOK(event)) {\n        _this.recordedBlobs.push(event.data);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleStopRecording\", function () {\n      if (_this.props.onStopRecording) {\n        _this.props.onStopRecording();\n      }\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n        return;\n      }\n      _this.mediaRecorder.stop();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handlePauseRecording\", function () {\n      if (_this.props.onPauseRecording) {\n        _this.props.onPauseRecording();\n      }\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n        return;\n      }\n      _this.mediaRecorder.pause();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleResumeRecording\", function () {\n      if (_this.props.onResumeRecording) {\n        _this.props.onResumeRecording();\n      }\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n        return;\n      }\n      _this.mediaRecorder.resume();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleStartRecording\", function () {\n      if (_this.props.onStartRecording) {\n        _this.props.onStartRecording();\n      }\n      _this.setState({\n        isRunningCountdown: true,\n        isReplayingVideo: false\n      });\n      setTimeout(function () {\n        return _this.startRecording();\n      }, _this.props.countdownTime);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"startRecording\", function () {\n      (0, _getVideoInfo.captureThumb)(_this.cameraVideo).then(function (thumbnail) {\n        _this.thumbnail = thumbnail;\n        _this.recordedBlobs = [];\n        var options = {\n          mimeType: _this.getMimeType()\n        };\n        try {\n          _this.setState({\n            isRunningCountdown: false,\n            isRecording: true\n          });\n          _this.startedAt = new Date().getTime();\n          _this.mediaRecorder = new window.MediaRecorder(_this.stream, options);\n          _this.mediaRecorder.addEventListener('stop', _this.handleStop);\n          _this.mediaRecorder.addEventListener('error', _this.handleError);\n          _this.mediaRecorder.addEventListener('dataavailable', _this.handleDataAvailable);\n          var _this$props = _this.props,\n            timeLimit = _this$props.timeLimit,\n            chunkSize = _this$props.chunkSize,\n            dataAvailableTimeout = _this$props.dataAvailableTimeout;\n          _this.mediaRecorder.start(chunkSize); // collect 10ms of data\n\n          if (timeLimit) {\n            _this.timeLimitTimeout = setTimeout(function () {\n              _this.handleStopRecording();\n            }, timeLimit);\n          } // mediaRecorder.ondataavailable should be called every 10ms,\n          // as that's what we're passing to mediaRecorder.start() above\n\n          if (Number.isInteger(dataAvailableTimeout)) {\n            setTimeout(function () {\n              if (_this.recordedBlobs.length === 0) {\n                _this.handleError(new _customErrors.ReactVideoRecorderDataAvailableTimeoutError(dataAvailableTimeout));\n              }\n            }, dataAvailableTimeout);\n          }\n        } catch (err) {\n          console.error(\"Couldn't create MediaRecorder\", err, options);\n          _this.handleError(err);\n        }\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleStop\", function (event) {\n      var endedAt = new Date().getTime();\n      if (!_this.recordedBlobs || _this.recordedBlobs.length <= 0) {\n        var error = new _customErrors.ReactVideoRecorderRecordedBlobsUnavailableError(event);\n        console.error(error.message, event);\n        _this.handleError(error);\n        return;\n      }\n      clearTimeout(_this.timeLimitTimeout);\n      var videoBlob = _this.recordedBlobs.length === 1 ? _this.recordedBlobs[0] : new window.Blob(_this.recordedBlobs, {\n        type: _this.getMimeType()\n      });\n      var thumbnailBlob = _this.thumbnail;\n      var startedAt = _this.startedAt;\n      var duration = endedAt - startedAt; // if this gets executed too soon, the last chunk of data is lost on FF\n\n      _this.mediaRecorder.ondataavailable = null;\n      _this.fixVideoMetadata(videoBlob).then(function (fixedVideoBlob) {\n        _this.setState({\n          isRecording: false,\n          isReplayingVideo: true,\n          isReplayVideoMuted: true,\n          fixedVideoBlob: fixedVideoBlob,\n          videoUrl: window.URL.createObjectURL(fixedVideoBlob)\n        });\n        _this.turnOffCamera();\n        _this.props.onRecordingComplete(fixedVideoBlob, startedAt, thumbnailBlob, duration);\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"fixVideoMetadata\", function (rawVideoBlob) {\n      var _Blob$prototype, _Blob$prototype$array;\n      var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n      if (isSafari) {\n        return Promise.resolve(rawVideoBlob);\n      } // see https://stackoverflow.com/a/63568311\n\n      (_Blob$prototype$array = (_Blob$prototype = Blob.prototype).arrayBuffer) !== null && _Blob$prototype$array !== void 0 ? _Blob$prototype$array : _Blob$prototype.arrayBuffer = function () {\n        return new Response(this).arrayBuffer();\n      };\n      return rawVideoBlob.arrayBuffer().then(function (buffer) {\n        var _elements;\n        var decoder = new _tsEbml.Decoder();\n        var elements = decoder.decode(buffer); // see https://github.com/legokichi/ts-ebml/issues/33#issuecomment-888800828\n\n        var validEmlType = ['m', 'u', 'i', 'f', 's', '8', 'b', 'd'];\n        elements = (_elements = elements) === null || _elements === void 0 ? void 0 : _elements.filter(function (elm) {\n          return validEmlType.includes(elm.type);\n        });\n        var reader = new _tsEbml.Reader();\n        reader.logging = false;\n        reader.drop_default_duration = false;\n        elements.forEach(function (element) {\n          return reader.read(element);\n        });\n        reader.stop();\n        var seekableMetadata = _tsEbml.tools.makeMetadataSeekable(reader.metadatas, reader.duration, reader.cues);\n        var blobBody = buffer.slice(reader.metadataSize);\n        var result = new Blob([seekableMetadata, blobBody], {\n          type: rawVideoBlob.type\n        });\n        return result;\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoSelected\", function (e) {\n      if (_this.state.isReplayingVideo) {\n        _this.setState({\n          isReplayingVideo: false\n        });\n      }\n      var files = e.target.files || e.dataTransfer.files;\n      if (files.length === 0) return;\n      var startedAt = new Date().getTime();\n      var video = files[0];\n      e.target.value = null;\n      var extension = video.type === 'video/quicktime' ? 'mov' : undefined;\n      (0, _getVideoInfo[\"default\"])(video).then(function (_ref) {\n        var duration = _ref.duration,\n          thumbnail = _ref.thumbnail;\n        _this.setState({\n          isRecording: false,\n          isReplayingVideo: true,\n          isReplayVideoMuted: true,\n          videoBlob: video,\n          videoUrl: window.URL.createObjectURL(video)\n        });\n        _this.props.onRecordingComplete(video, startedAt, thumbnail, duration, extension);\n      })[\"catch\"](function (err) {\n        _this.handleError(err);\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleOpenVideoInput\", function () {\n      if (_this.props.onOpenVideoInput) {\n        _this.props.onOpenVideoInput();\n      }\n      _this.videoInput.current.value = null;\n      _this.videoInput.current.click(); // fixes a bug on iPhone where it doesn't save the recorded video on the second time (if you press the 'Use another video' button)\n\n      _this.videoInput.current.addEventListener('change', _this.handleVideoSelected);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleStopReplaying\", function () {\n      if (_this.props.onStopReplaying) {\n        _this.props.onStopReplaying();\n      }\n      if (_this.props.useVideoInput && _this.props.isOnInitially) {\n        return _this.handleOpenVideoInput();\n      }\n      _this.setState({\n        isReplayingVideo: false\n      });\n      if (_this.state.isInlineRecordingSupported && _this.props.isOnInitially) {\n        _this.turnOnCamera();\n      } else if (_this.state.isVideoInputSupported && _this.props.isOnInitially) {\n        _this.handleOpenVideoInput();\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleReplayVideoClick\", function () {\n      if (_this.replayVideo.paused && !_this.props.showReplayControls) {\n        _this.replayVideo.play();\n      } // fixes bug where seeking control during autoplay is not available until the video is almost completely played through\n\n      if (!_this.props.replayVideoAutoplayAndLoopOff) {\n        _this.setState({\n          isReplayVideoMuted: !_this.state.isReplayVideoMuted\n        });\n      }\n    });\n    return _this;\n  }\n  _createClass(VideoRecorder, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var isInlineRecordingSupported = !!window.MediaRecorder && !!navigator.mediaDevices;\n      var isVideoInputSupported = document.createElement('input').capture !== undefined;\n      this.setState({\n        isInlineRecordingSupported: isInlineRecordingSupported,\n        isVideoInputSupported: isVideoInputSupported\n      }, function () {\n        if (_this2.props.useVideoInput && _this2.props.isOnInitially) {\n          _this2.handleOpenVideoInput();\n        } else if (_this2.state.isInlineRecordingSupported && _this2.props.isOnInitially) {\n          _this2.turnOnCamera();\n        } else if (_this2.state.isVideoInputSupported && _this2.props.isOnInitially) {\n          _this2.handleOpenVideoInput();\n        }\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.replayVideo && this.state.isReplayingVideo && !prevState.isReplayingVideo) {\n        this.tryToUnmuteReplayVideo();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.turnOffCamera();\n      this.isComponentUnmounted = true;\n    }\n  }, {\n    key: \"renderCameraView\",\n    value: function renderCameraView() {\n      var _this3 = this;\n      var _this$props2 = this.props,\n        cameraViewClassName = _this$props2.cameraViewClassName,\n        showReplayControls = _this$props2.showReplayControls,\n        videoControlsList = _this$props2.videoControlsList,\n        disablePictureInPicture = _this$props2.disablePictureInPicture,\n        replayVideoAutoplayAndLoopOff = _this$props2.replayVideoAutoplayAndLoopOff,\n        renderDisconnectedView = _this$props2.renderDisconnectedView,\n        renderVideoInputView = _this$props2.renderVideoInputView,\n        renderUnsupportedView = _this$props2.renderUnsupportedView,\n        renderErrorView = _this$props2.renderErrorView,\n        renderLoadingView = _this$props2.renderLoadingView,\n        useVideoInput = _this$props2.useVideoInput,\n        videoClassName = _this$props2.videoClassName;\n      var _this$state2 = this.state,\n        isVideoInputSupported = _this$state2.isVideoInputSupported,\n        isReplayingVideo = _this$state2.isReplayingVideo,\n        isInlineRecordingSupported = _this$state2.isInlineRecordingSupported,\n        thereWasAnError = _this$state2.thereWasAnError,\n        error = _this$state2.error,\n        isCameraOn = _this$state2.isCameraOn,\n        isConnecting = _this$state2.isConnecting,\n        isReplayVideoMuted = _this$state2.isReplayVideoMuted,\n        isRecording = _this$state2.isRecording,\n        availableDeviceIds = _this$state2.availableDeviceIds;\n      var shouldUseVideoInput = useVideoInput || !isInlineRecordingSupported && isVideoInputSupported;\n      var videoInput = shouldUseVideoInput ? /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n        ref: this.videoInput,\n        key: \"videoInput\",\n        type: \"file\",\n        accept: \"video/*\",\n        capture: useVideoInput ? undefined : 'user',\n        style: {\n          display: 'none'\n        },\n        onChange: this.handleVideoSelected\n      }) : null;\n      if (isReplayingVideo) {\n        return /*#__PURE__*/_react[\"default\"].createElement(CameraView, {\n          key: \"replay\",\n          className: cameraViewClassName\n        }, /*#__PURE__*/_react[\"default\"].createElement(Video, {\n          ref: function ref(el) {\n            return _this3.replayVideo = el;\n          },\n          className: videoClassName,\n          src: this.state.videoUrl,\n          loop: true,\n          muted: isReplayVideoMuted,\n          playsInline: true,\n          autoPlay: !replayVideoAutoplayAndLoopOff,\n          controls: showReplayControls,\n          onClick: this.handleReplayVideoClick,\n          onDurationChange: this.handleDurationChange,\n          controlsList: videoControlsList,\n          disablePictureInPicture: disablePictureInPicture\n        }), videoInput);\n      }\n      if (shouldUseVideoInput) {\n        return renderVideoInputView({\n          videoInput: videoInput\n        });\n      }\n      if (!isInlineRecordingSupported) {\n        return renderUnsupportedView();\n      }\n      if (thereWasAnError) {\n        return renderErrorView({\n          error: error\n        });\n      }\n      if (isCameraOn) {\n        // Enable switch camera button, only if not recording and multiple video sources available\n        var switchCameraControl = availableDeviceIds && availableDeviceIds.length >= 2 && !isRecording ? /*#__PURE__*/_react[\"default\"].createElement(_switchCameraView[\"default\"], {\n          onClick: this.handleSwitchCamera\n        }) : null;\n        return /*#__PURE__*/_react[\"default\"].createElement(CameraView, {\n          key: \"camera\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(Video, {\n          isFlipped: this.props.isFlipped,\n          ref: function ref(el) {\n            return _this3.cameraVideo = el;\n          },\n          autoPlay: true,\n          muted: true,\n          playsInline: true\n        }), switchCameraControl);\n      }\n      if (isConnecting) {\n        return renderLoadingView();\n      }\n      return renderDisconnectedView();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      var _this$state3 = this.state,\n        isVideoInputSupported = _this$state3.isVideoInputSupported,\n        isInlineRecordingSupported = _this$state3.isInlineRecordingSupported,\n        thereWasAnError = _this$state3.thereWasAnError,\n        isRecording = _this$state3.isRecording,\n        isCameraOn = _this$state3.isCameraOn,\n        streamIsReady = _this$state3.streamIsReady,\n        isConnecting = _this$state3.isConnecting,\n        isRunningCountdown = _this$state3.isRunningCountdown,\n        isReplayingVideo = _this$state3.isReplayingVideo,\n        isReplayVideoMuted = _this$state3.isReplayVideoMuted;\n      var _this$props3 = this.props,\n        countdownTime = _this$props3.countdownTime,\n        timeLimit = _this$props3.timeLimit,\n        showReplayControls = _this$props3.showReplayControls,\n        replayVideoAutoplayAndLoopOff = _this$props3.replayVideoAutoplayAndLoopOff,\n        renderActions = _this$props3.renderActions,\n        t = _this$props3.t,\n        useVideoInput = _this$props3.useVideoInput,\n        wrapperClassName = _this$props3.wrapperClassName;\n      return /*#__PURE__*/_react[\"default\"].createElement(Wrapper, {\n        className: wrapperClassName\n      }, this.renderCameraView(), renderActions({\n        t: t,\n        isVideoInputSupported: isVideoInputSupported,\n        isInlineRecordingSupported: isInlineRecordingSupported,\n        thereWasAnError: thereWasAnError,\n        isRecording: isRecording,\n        isCameraOn: isCameraOn,\n        streamIsReady: streamIsReady,\n        isConnecting: isConnecting,\n        isRunningCountdown: isRunningCountdown,\n        isReplayingVideo: isReplayingVideo,\n        isReplayVideoMuted: isReplayVideoMuted,\n        countdownTime: countdownTime,\n        timeLimit: timeLimit,\n        showReplayControls: showReplayControls,\n        replayVideoAutoplayAndLoopOff: replayVideoAutoplayAndLoopOff,\n        useVideoInput: useVideoInput,\n        onTurnOnCamera: function onTurnOnCamera() {\n          return _this4.turnOnCamera();\n        },\n        onSwitchCamera: this.handleSwitchCamera,\n        onTurnOffCamera: this.turnOffCamera,\n        onOpenVideoInput: this.handleOpenVideoInput,\n        onStartRecording: this.handleStartRecording,\n        onStopRecording: this.handleStopRecording,\n        onPauseRecording: this.handlePauseRecording,\n        onResumeRecording: this.handleResumeRecording,\n        onStopReplaying: this.handleStopReplaying\n      }));\n    }\n  }]);\n  return VideoRecorder;\n}(_react.Component);\nexports[\"default\"] = VideoRecorder;\n_defineProperty(VideoRecorder, \"propTypes\", {\n  /** Whether or not to start the camera initially */\n  isOnInitially: _propTypes[\"default\"].bool,\n  /** Whether or not to display the video flipped (makes sense for user facing camera) */\n  isFlipped: _propTypes[\"default\"].bool,\n  /** Pass this if you want to force a specific mime-type for the video */\n  mimeType: _propTypes[\"default\"].string,\n  /** How much time to wait until it starts recording (in ms) */\n  countdownTime: _propTypes[\"default\"].number,\n  /** Use this if you want to set a time limit for the video (in ms) */\n  timeLimit: _propTypes[\"default\"].number,\n  /** Use this if you want to show play/pause/etc. controls on the replay video */\n  showReplayControls: _propTypes[\"default\"].bool,\n  /** Use this to turn off autoplay and looping of the replay video. It is recommended to also showReplayControls in order to play */\n  replayVideoAutoplayAndLoopOff: _propTypes[\"default\"].bool,\n  /** Use this if you want to customize the constraints passed to getUserMedia() */\n  constraints: _propTypes[\"default\"].shape({\n    audio: _propTypes[\"default\"].any,\n    video: _propTypes[\"default\"].any\n  }),\n  chunkSize: _propTypes[\"default\"].number,\n  dataAvailableTimeout: _propTypes[\"default\"].number,\n  useVideoInput: _propTypes[\"default\"].bool,\n  /** Use this to configure the replaying video element's controlslist attribute */\n  videoControlsList: _propTypes[\"default\"].string,\n  /** Use this to disable picture in picture mode on the replaying video element */\n  disablePictureInPicture: _propTypes[\"default\"].bool,\n  renderDisconnectedView: _propTypes[\"default\"].func,\n  renderLoadingView: _propTypes[\"default\"].func,\n  renderVideoInputView: _propTypes[\"default\"].func,\n  renderUnsupportedView: _propTypes[\"default\"].func,\n  renderErrorView: _propTypes[\"default\"].func,\n  renderActions: _propTypes[\"default\"].func,\n  cameraViewClassName: _propTypes[\"default\"].string,\n  videoClassName: _propTypes[\"default\"].string,\n  wrapperClassName: _propTypes[\"default\"].string,\n  /** Use this to localize the texts */\n  t: _propTypes[\"default\"].func,\n  onCameraOn: _propTypes[\"default\"].func,\n  onTurnOnCamera: _propTypes[\"default\"].func,\n  onSwitchCamera: _propTypes[\"default\"].func,\n  onTurnOffCamera: _propTypes[\"default\"].func,\n  onStartRecording: _propTypes[\"default\"].func,\n  onStopRecording: _propTypes[\"default\"].func,\n  onPauseRecording: _propTypes[\"default\"].func,\n  onResumeRecording: _propTypes[\"default\"].func,\n  onRecordingComplete: _propTypes[\"default\"].func,\n  onOpenVideoInput: _propTypes[\"default\"].func,\n  onStopReplaying: _propTypes[\"default\"].func,\n  onError: _propTypes[\"default\"].func\n});\n_defineProperty(VideoRecorder, \"defaultProps\", {\n  renderUnsupportedView: function renderUnsupportedView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_unsupportedView[\"default\"], null);\n  },\n  renderErrorView: function renderErrorView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_errorView[\"default\"], null);\n  },\n  renderVideoInputView: function renderVideoInputView(_ref2) {\n    var videoInput = _ref2.videoInput;\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, videoInput);\n  },\n  renderDisconnectedView: function renderDisconnectedView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_disconnectedView[\"default\"], null);\n  },\n  renderLoadingView: function renderLoadingView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_loadingView[\"default\"], null);\n  },\n  t: function t(x) {\n    return x;\n  },\n  renderActions: _renderActions[\"default\"],\n  isFlipped: true,\n  countdownTime: 3000,\n  constraints: CONSTRAINTS,\n  chunkSize: 250,\n  dataAvailableTimeout: 500\n});","map":{"version":3,"names":["Object","defineProperty","exports","value","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_styledComponents","_tsEbml","_unsupportedView","_errorView","_disconnectedView","_loadingView","_switchCameraView","_renderActions","_getVideoInfo","_customErrors","obj","__esModule","_getRequireWildcardCache","WeakMap","cache","_typeof","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","MIME_TYPES","CONSTRAINTS","audio","video","Wrapper","div","withConfig","displayName","componentId","CameraView","Video","isFlipped","css","onClick","VideoRecorder","_Component","_super","_this","_len","args","Array","_key","concat","createRef","isRecording","isCameraOn","isConnecting","isReplayingVideo","isReplayVideoMuted","thereWasAnError","error","streamIsReady","isInlineRecordingSupported","isVideoInputSupported","stream","undefined","currentDeviceId","availableDeviceIds","deviceId","onTurnOnCamera","navigator","mediaDevices","enumerateDevices","then","videoDevices","x","kind","find","handleError","ReactVideoRecorderDeviceUnavailableError","setState","map","fallbackContraints","currentConstraints","constraints","exact","getUserMedia","err","name","console","warn","handleSuccess","onSwitchCamera","_this$state","state","getTracks","stop","index","findIndex","maxIndex","turnOnCamera","onTurnOffCamera","clearInterval","inactivityTimer","isComponentUnmounted","onCameraOn","window","URL","cameraVideo","srcObject","src","setTimeout","onError","clearTimeout","timeLimitTimeout","turnOffCamera","event","ReactVideoRecorderDataIssueError","message","mimeType","MediaRecorder","isTypeSupported","mediaRecorder","data","handleDataIssue","chunkSize","dataCheckInterval","blobCount","recordedBlobs","blob","Blob","type","getMimeType","size","replayVideo","muted","playPromise","play","replayVideoAutoplayAndLoopOff","pause","loop","isDataHealthOK","onStopRecording","ReactVideoRecorderMediaRecorderUnavailableError","onPauseRecording","onResumeRecording","resume","onStartRecording","isRunningCountdown","startRecording","countdownTime","captureThumb","thumbnail","options","startedAt","getTime","addEventListener","handleStop","handleDataAvailable","_this$props","timeLimit","dataAvailableTimeout","start","handleStopRecording","Number","isInteger","ReactVideoRecorderDataAvailableTimeoutError","endedAt","ReactVideoRecorderRecordedBlobsUnavailableError","videoBlob","thumbnailBlob","duration","ondataavailable","fixVideoMetadata","fixedVideoBlob","videoUrl","createObjectURL","onRecordingComplete","rawVideoBlob","_Blob$prototype","_Blob$prototype$array","isSafari","test","userAgent","Promise","resolve","arrayBuffer","Response","buffer","_elements","decoder","Decoder","elements","decode","validEmlType","elm","includes","reader","Reader","logging","drop_default_duration","element","read","seekableMetadata","tools","makeMetadataSeekable","metadatas","cues","blobBody","slice","metadataSize","files","dataTransfer","extension","_ref","onOpenVideoInput","videoInput","current","click","handleVideoSelected","onStopReplaying","useVideoInput","isOnInitially","handleOpenVideoInput","paused","showReplayControls","componentDidMount","_this2","document","createElement","capture","componentDidUpdate","prevProps","prevState","tryToUnmuteReplayVideo","componentWillUnmount","renderCameraView","_this3","_this$props2","cameraViewClassName","videoControlsList","disablePictureInPicture","renderDisconnectedView","renderVideoInputView","renderUnsupportedView","renderErrorView","renderLoadingView","videoClassName","_this$state2","shouldUseVideoInput","ref","accept","style","display","onChange","className","el","playsInline","autoPlay","controls","handleReplayVideoClick","onDurationChange","handleDurationChange","controlsList","switchCameraControl","handleSwitchCamera","render","_this4","_this$state3","_this$props3","renderActions","t","wrapperClassName","handleStartRecording","handlePauseRecording","handleResumeRecording","handleStopReplaying","Component","bool","string","number","shape","any","func","_ref2","Fragment"],"sources":["/Users/ruchireddy/trick-tracker/frontend/node_modules/react-video-recorder/lib/video-recorder.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\n\nvar _tsEbml = require(\"ts-ebml\");\n\nvar _unsupportedView = _interopRequireDefault(require(\"./defaults/unsupported-view\"));\n\nvar _errorView = _interopRequireDefault(require(\"./defaults/error-view\"));\n\nvar _disconnectedView = _interopRequireDefault(require(\"./defaults/disconnected-view\"));\n\nvar _loadingView = _interopRequireDefault(require(\"./defaults/loading-view\"));\n\nvar _switchCameraView = _interopRequireDefault(require(\"./defaults/switch-camera-view\"));\n\nvar _renderActions = _interopRequireDefault(require(\"./defaults/render-actions\"));\n\nvar _getVideoInfo = _interopRequireWildcard(require(\"./get-video-info\"));\n\nvar _customErrors = require(\"./custom-errors\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MIME_TYPES = ['video/webm;codecs=\"vp8,opus\"', 'video/webm;codecs=h264', 'video/webm;codecs=vp9', 'video/webm', 'video/mp4'];\nvar CONSTRAINTS = {\n  audio: true,\n  video: true\n};\n\nvar Wrapper = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"video-recorder__Wrapper\",\n  componentId: \"sc-7k20rv-0\"\n})([\"position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;overflow:hidden;min-height:300px;background-color:#000;color:white;box-sizing:border-box;*{box-sizing:inherit;}\"]);\n\nvar CameraView = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"video-recorder__CameraView\",\n  componentId: \"sc-7k20rv-1\"\n})([\"width:100%;height:100%;\"]);\n\nvar Video = _styledComponents[\"default\"].video.withConfig({\n  displayName: \"video-recorder__Video\",\n  componentId: \"sc-7k20rv-2\"\n})([\"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-height:100%;min-width:100%;width:100%;height:100%;object-fit:cover;\", \";\", \";\"], function (props) {\n  return props.isFlipped && (0, _styledComponents.css)([\"transform:translate(-50%,-50%) scaleX(-1);\"]);\n}, function (props) {\n  return props.onClick && (0, _styledComponents.css)([\"cursor:pointer;\"]);\n});\n\nvar VideoRecorder = /*#__PURE__*/function (_Component) {\n  _inherits(VideoRecorder, _Component);\n\n  var _super = _createSuper(VideoRecorder);\n\n  function VideoRecorder() {\n    var _this;\n\n    _classCallCheck(this, VideoRecorder);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"videoInput\", /*#__PURE__*/_react[\"default\"].createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"isComponentUnmounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"timeSinceInactivity\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isRecording: false,\n      isCameraOn: false,\n      isConnecting: false,\n      isReplayingVideo: false,\n      isReplayVideoMuted: true,\n      thereWasAnError: false,\n      error: null,\n      streamIsReady: false,\n      isInlineRecordingSupported: null,\n      isVideoInputSupported: null,\n      stream: undefined,\n      currentDeviceId: null,\n      availableDeviceIds: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"turnOnCamera\", function () {\n      var deviceId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (_this.props.onTurnOnCamera) {\n        _this.props.onTurnOnCamera();\n      }\n\n      navigator.mediaDevices.enumerateDevices().then(function (mediaDevices) {\n        var videoDevices = mediaDevices.filter(function (x) {\n          return x.kind === 'videoinput';\n        });\n\n        if (deviceId && videoDevices[0] && videoDevices.find(function (x) {\n          return x.deviceId;\n        }) === undefined) {\n          return _this.handleError(new _customErrors.ReactVideoRecorderDeviceUnavailableError());\n        }\n\n        var currentDeviceId = typeof deviceId === 'string' ? deviceId : videoDevices[0].deviceId;\n\n        _this.setState({\n          isConnecting: true,\n          isReplayingVideo: false,\n          thereWasAnError: false,\n          currentDeviceId: currentDeviceId,\n          availableDeviceIds: videoDevices.map(function (x) {\n            return x.deviceId;\n          }),\n          error: null\n        });\n\n        var fallbackContraints = {\n          audio: true,\n          video: true\n        };\n\n        var currentConstraints = _objectSpread(_objectSpread({}, _this.props.constraints), {}, {\n          video: {\n            deviceId: {\n              exact: currentDeviceId\n            }\n          }\n        });\n\n        navigator.mediaDevices.getUserMedia(currentConstraints)[\"catch\"](function (err) {\n          // there's a bug in chrome in some windows computers where using `ideal` in the constraints throws a NotReadableError\n          if (err.name === 'NotReadableError' || err.name === 'OverconstrainedError') {\n            console.warn(\"Got \".concat(err.name, \", trying getUserMedia again with fallback constraints\"));\n            return navigator.mediaDevices.getUserMedia(fallbackContraints);\n          }\n\n          throw err;\n        }).then(_this.handleSuccess)[\"catch\"](_this.handleError);\n      })[\"catch\"](_this.handleError);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSwitchCamera\", function () {\n      if (_this.props.onSwitchCamera) {\n        _this.props.onSwitchCamera();\n      }\n\n      var _this$state = _this.state,\n          currentDeviceId = _this$state.currentDeviceId,\n          availableDeviceIds = _this$state.availableDeviceIds; // Stop media tracks\n\n      _this.stream && _this.stream.getTracks().forEach(function (stream) {\n        return stream.stop();\n      });\n      var index = availableDeviceIds.findIndex(function (x) {\n        return x === currentDeviceId;\n      });\n      var maxIndex = availableDeviceIds.length - 1;\n\n      if (index < 0) {\n        return _this.handleError(new _customErrors.ReactVideoRecorderDeviceUnavailableError());\n      }\n\n      if (index + 1 > maxIndex) return _this.turnOnCamera(availableDeviceIds[0]);\n      return _this.turnOnCamera(availableDeviceIds[index + 1]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"turnOffCamera\", function () {\n      if (_this.props.onTurnOffCamera) {\n        _this.props.onTurnOffCamera();\n      }\n\n      _this.stream && _this.stream.getTracks().forEach(function (stream) {\n        return stream.stop();\n      });\n\n      _this.setState({\n        isCameraOn: false\n      });\n\n      clearInterval(_this.inactivityTimer);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSuccess\", function (stream) {\n      // Since handleSuccess is an async function, we may be in a situation where this was called after the\n      // component was unmounted\n      if (_this.isComponentUnmounted) {\n        return;\n      }\n\n      _this.stream = stream;\n\n      _this.setState({\n        isCameraOn: true,\n        stream: stream\n      });\n\n      if (_this.props.onCameraOn) {\n        _this.props.onCameraOn();\n      }\n\n      if (window.URL) {\n        _this.cameraVideo.srcObject = stream;\n      } else {\n        _this.cameraVideo.src = stream;\n      } // there is probably a better way\n      // but this makes sure the start recording button\n      // gives the stream a couple miliseconds to be ready\n\n\n      setTimeout(function () {\n        _this.setState({\n          isConnecting: false,\n          streamIsReady: true\n        });\n      }, 200);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleError\", function (err) {\n      var onError = _this.props.onError;\n\n      if (onError) {\n        onError(err);\n      }\n\n      if (_this.isComponentUnmounted) {\n        return;\n      }\n\n      console.error('Captured error', err);\n      clearTimeout(_this.timeLimitTimeout);\n\n      _this.setState({\n        isConnecting: _this.state.isConnecting && false,\n        isRecording: false,\n        thereWasAnError: true,\n        error: err\n      });\n\n      if (_this.state.isCameraOn) {\n        _this.turnOffCamera();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDataIssue\", function (event) {\n      var error = new _customErrors.ReactVideoRecorderDataIssueError(event);\n      console.error(error.message, event);\n\n      _this.handleError(error);\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMimeType\", function () {\n      if (_this.props.mimeType) {\n        return _this.props.mimeType;\n      }\n\n      var mimeType = window.MediaRecorder.isTypeSupported ? MIME_TYPES.find(window.MediaRecorder.isTypeSupported) : 'video/webm';\n      return _this.mediaRecorder && _this.mediaRecorder.mimeType || mimeType || '';\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isDataHealthOK\", function (event) {\n      if (!event.data) return _this.handleDataIssue(event);\n      var chunkSize = _this.props.chunkSize;\n      var dataCheckInterval = 2000 / chunkSize; // in some browsers (FF/S), data only shows up\n      // after a certain amount of time ~everyt 2 seconds\n\n      var blobCount = _this.recordedBlobs.length;\n\n      if (blobCount > dataCheckInterval && blobCount % dataCheckInterval === 0) {\n        var blob = new window.Blob(_this.recordedBlobs, {\n          type: _this.getMimeType()\n        });\n        if (blob.size <= 0) return _this.handleDataIssue(event);\n      }\n\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"tryToUnmuteReplayVideo\", function () {\n      var video = _this.replayVideo;\n      video.muted = false;\n      var playPromise = video.play();\n\n      if (!playPromise) {\n        video.muted = true;\n        return;\n      }\n\n      playPromise.then(function () {\n        _this.setState({\n          isReplayVideoMuted: false\n        }); // fixes bug where seeking control during autoplay is not available until the video is almost completely played through\n\n\n        if (_this.props.replayVideoAutoplayAndLoopOff) {\n          video.pause();\n          video.loop = false;\n        }\n      })[\"catch\"](function (err) {\n        console.warn('Could not autoplay replay video', err);\n        video.muted = true;\n        return video.play();\n      })[\"catch\"](function (err) {\n        console.warn('Could play muted replay video after failed autoplay', err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDataAvailable\", function (event) {\n      if (_this.isDataHealthOK(event)) {\n        _this.recordedBlobs.push(event.data);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStopRecording\", function () {\n      if (_this.props.onStopRecording) {\n        _this.props.onStopRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.stop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePauseRecording\", function () {\n      if (_this.props.onPauseRecording) {\n        _this.props.onPauseRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.pause();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleResumeRecording\", function () {\n      if (_this.props.onResumeRecording) {\n        _this.props.onResumeRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.resume();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStartRecording\", function () {\n      if (_this.props.onStartRecording) {\n        _this.props.onStartRecording();\n      }\n\n      _this.setState({\n        isRunningCountdown: true,\n        isReplayingVideo: false\n      });\n\n      setTimeout(function () {\n        return _this.startRecording();\n      }, _this.props.countdownTime);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"startRecording\", function () {\n      (0, _getVideoInfo.captureThumb)(_this.cameraVideo).then(function (thumbnail) {\n        _this.thumbnail = thumbnail;\n        _this.recordedBlobs = [];\n        var options = {\n          mimeType: _this.getMimeType()\n        };\n\n        try {\n          _this.setState({\n            isRunningCountdown: false,\n            isRecording: true\n          });\n\n          _this.startedAt = new Date().getTime();\n          _this.mediaRecorder = new window.MediaRecorder(_this.stream, options);\n\n          _this.mediaRecorder.addEventListener('stop', _this.handleStop);\n\n          _this.mediaRecorder.addEventListener('error', _this.handleError);\n\n          _this.mediaRecorder.addEventListener('dataavailable', _this.handleDataAvailable);\n\n          var _this$props = _this.props,\n              timeLimit = _this$props.timeLimit,\n              chunkSize = _this$props.chunkSize,\n              dataAvailableTimeout = _this$props.dataAvailableTimeout;\n\n          _this.mediaRecorder.start(chunkSize); // collect 10ms of data\n\n\n          if (timeLimit) {\n            _this.timeLimitTimeout = setTimeout(function () {\n              _this.handleStopRecording();\n            }, timeLimit);\n          } // mediaRecorder.ondataavailable should be called every 10ms,\n          // as that's what we're passing to mediaRecorder.start() above\n\n\n          if (Number.isInteger(dataAvailableTimeout)) {\n            setTimeout(function () {\n              if (_this.recordedBlobs.length === 0) {\n                _this.handleError(new _customErrors.ReactVideoRecorderDataAvailableTimeoutError(dataAvailableTimeout));\n              }\n            }, dataAvailableTimeout);\n          }\n        } catch (err) {\n          console.error(\"Couldn't create MediaRecorder\", err, options);\n\n          _this.handleError(err);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStop\", function (event) {\n      var endedAt = new Date().getTime();\n\n      if (!_this.recordedBlobs || _this.recordedBlobs.length <= 0) {\n        var error = new _customErrors.ReactVideoRecorderRecordedBlobsUnavailableError(event);\n        console.error(error.message, event);\n\n        _this.handleError(error);\n\n        return;\n      }\n\n      clearTimeout(_this.timeLimitTimeout);\n      var videoBlob = _this.recordedBlobs.length === 1 ? _this.recordedBlobs[0] : new window.Blob(_this.recordedBlobs, {\n        type: _this.getMimeType()\n      });\n      var thumbnailBlob = _this.thumbnail;\n      var startedAt = _this.startedAt;\n      var duration = endedAt - startedAt; // if this gets executed too soon, the last chunk of data is lost on FF\n\n      _this.mediaRecorder.ondataavailable = null;\n\n      _this.fixVideoMetadata(videoBlob).then(function (fixedVideoBlob) {\n        _this.setState({\n          isRecording: false,\n          isReplayingVideo: true,\n          isReplayVideoMuted: true,\n          fixedVideoBlob: fixedVideoBlob,\n          videoUrl: window.URL.createObjectURL(fixedVideoBlob)\n        });\n\n        _this.turnOffCamera();\n\n        _this.props.onRecordingComplete(fixedVideoBlob, startedAt, thumbnailBlob, duration);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fixVideoMetadata\", function (rawVideoBlob) {\n      var _Blob$prototype, _Blob$prototype$array;\n\n      var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n      if (isSafari) {\n        return Promise.resolve(rawVideoBlob);\n      } // see https://stackoverflow.com/a/63568311\n\n\n      (_Blob$prototype$array = (_Blob$prototype = Blob.prototype).arrayBuffer) !== null && _Blob$prototype$array !== void 0 ? _Blob$prototype$array : _Blob$prototype.arrayBuffer = function () {\n        return new Response(this).arrayBuffer();\n      };\n      return rawVideoBlob.arrayBuffer().then(function (buffer) {\n        var _elements;\n\n        var decoder = new _tsEbml.Decoder();\n        var elements = decoder.decode(buffer); // see https://github.com/legokichi/ts-ebml/issues/33#issuecomment-888800828\n\n        var validEmlType = ['m', 'u', 'i', 'f', 's', '8', 'b', 'd'];\n        elements = (_elements = elements) === null || _elements === void 0 ? void 0 : _elements.filter(function (elm) {\n          return validEmlType.includes(elm.type);\n        });\n        var reader = new _tsEbml.Reader();\n        reader.logging = false;\n        reader.drop_default_duration = false;\n        elements.forEach(function (element) {\n          return reader.read(element);\n        });\n        reader.stop();\n\n        var seekableMetadata = _tsEbml.tools.makeMetadataSeekable(reader.metadatas, reader.duration, reader.cues);\n\n        var blobBody = buffer.slice(reader.metadataSize);\n        var result = new Blob([seekableMetadata, blobBody], {\n          type: rawVideoBlob.type\n        });\n        return result;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoSelected\", function (e) {\n      if (_this.state.isReplayingVideo) {\n        _this.setState({\n          isReplayingVideo: false\n        });\n      }\n\n      var files = e.target.files || e.dataTransfer.files;\n      if (files.length === 0) return;\n      var startedAt = new Date().getTime();\n      var video = files[0];\n      e.target.value = null;\n      var extension = video.type === 'video/quicktime' ? 'mov' : undefined;\n      (0, _getVideoInfo[\"default\"])(video).then(function (_ref) {\n        var duration = _ref.duration,\n            thumbnail = _ref.thumbnail;\n\n        _this.setState({\n          isRecording: false,\n          isReplayingVideo: true,\n          isReplayVideoMuted: true,\n          videoBlob: video,\n          videoUrl: window.URL.createObjectURL(video)\n        });\n\n        _this.props.onRecordingComplete(video, startedAt, thumbnail, duration, extension);\n      })[\"catch\"](function (err) {\n        _this.handleError(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOpenVideoInput\", function () {\n      if (_this.props.onOpenVideoInput) {\n        _this.props.onOpenVideoInput();\n      }\n\n      _this.videoInput.current.value = null;\n\n      _this.videoInput.current.click(); // fixes a bug on iPhone where it doesn't save the recorded video on the second time (if you press the 'Use another video' button)\n\n\n      _this.videoInput.current.addEventListener('change', _this.handleVideoSelected);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStopReplaying\", function () {\n      if (_this.props.onStopReplaying) {\n        _this.props.onStopReplaying();\n      }\n\n      if (_this.props.useVideoInput && _this.props.isOnInitially) {\n        return _this.handleOpenVideoInput();\n      }\n\n      _this.setState({\n        isReplayingVideo: false\n      });\n\n      if (_this.state.isInlineRecordingSupported && _this.props.isOnInitially) {\n        _this.turnOnCamera();\n      } else if (_this.state.isVideoInputSupported && _this.props.isOnInitially) {\n        _this.handleOpenVideoInput();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleReplayVideoClick\", function () {\n      if (_this.replayVideo.paused && !_this.props.showReplayControls) {\n        _this.replayVideo.play();\n      } // fixes bug where seeking control during autoplay is not available until the video is almost completely played through\n\n\n      if (!_this.props.replayVideoAutoplayAndLoopOff) {\n        _this.setState({\n          isReplayVideoMuted: !_this.state.isReplayVideoMuted\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(VideoRecorder, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var isInlineRecordingSupported = !!window.MediaRecorder && !!navigator.mediaDevices;\n      var isVideoInputSupported = document.createElement('input').capture !== undefined;\n      this.setState({\n        isInlineRecordingSupported: isInlineRecordingSupported,\n        isVideoInputSupported: isVideoInputSupported\n      }, function () {\n        if (_this2.props.useVideoInput && _this2.props.isOnInitially) {\n          _this2.handleOpenVideoInput();\n        } else if (_this2.state.isInlineRecordingSupported && _this2.props.isOnInitially) {\n          _this2.turnOnCamera();\n        } else if (_this2.state.isVideoInputSupported && _this2.props.isOnInitially) {\n          _this2.handleOpenVideoInput();\n        }\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.replayVideo && this.state.isReplayingVideo && !prevState.isReplayingVideo) {\n        this.tryToUnmuteReplayVideo();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.turnOffCamera();\n      this.isComponentUnmounted = true;\n    }\n  }, {\n    key: \"renderCameraView\",\n    value: function renderCameraView() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          cameraViewClassName = _this$props2.cameraViewClassName,\n          showReplayControls = _this$props2.showReplayControls,\n          videoControlsList = _this$props2.videoControlsList,\n          disablePictureInPicture = _this$props2.disablePictureInPicture,\n          replayVideoAutoplayAndLoopOff = _this$props2.replayVideoAutoplayAndLoopOff,\n          renderDisconnectedView = _this$props2.renderDisconnectedView,\n          renderVideoInputView = _this$props2.renderVideoInputView,\n          renderUnsupportedView = _this$props2.renderUnsupportedView,\n          renderErrorView = _this$props2.renderErrorView,\n          renderLoadingView = _this$props2.renderLoadingView,\n          useVideoInput = _this$props2.useVideoInput,\n          videoClassName = _this$props2.videoClassName;\n      var _this$state2 = this.state,\n          isVideoInputSupported = _this$state2.isVideoInputSupported,\n          isReplayingVideo = _this$state2.isReplayingVideo,\n          isInlineRecordingSupported = _this$state2.isInlineRecordingSupported,\n          thereWasAnError = _this$state2.thereWasAnError,\n          error = _this$state2.error,\n          isCameraOn = _this$state2.isCameraOn,\n          isConnecting = _this$state2.isConnecting,\n          isReplayVideoMuted = _this$state2.isReplayVideoMuted,\n          isRecording = _this$state2.isRecording,\n          availableDeviceIds = _this$state2.availableDeviceIds;\n      var shouldUseVideoInput = useVideoInput || !isInlineRecordingSupported && isVideoInputSupported;\n      var videoInput = shouldUseVideoInput ? /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n        ref: this.videoInput,\n        key: \"videoInput\",\n        type: \"file\",\n        accept: \"video/*\",\n        capture: useVideoInput ? undefined : 'user',\n        style: {\n          display: 'none'\n        },\n        onChange: this.handleVideoSelected\n      }) : null;\n\n      if (isReplayingVideo) {\n        return /*#__PURE__*/_react[\"default\"].createElement(CameraView, {\n          key: \"replay\",\n          className: cameraViewClassName\n        }, /*#__PURE__*/_react[\"default\"].createElement(Video, {\n          ref: function ref(el) {\n            return _this3.replayVideo = el;\n          },\n          className: videoClassName,\n          src: this.state.videoUrl,\n          loop: true,\n          muted: isReplayVideoMuted,\n          playsInline: true,\n          autoPlay: !replayVideoAutoplayAndLoopOff,\n          controls: showReplayControls,\n          onClick: this.handleReplayVideoClick,\n          onDurationChange: this.handleDurationChange,\n          controlsList: videoControlsList,\n          disablePictureInPicture: disablePictureInPicture\n        }), videoInput);\n      }\n\n      if (shouldUseVideoInput) {\n        return renderVideoInputView({\n          videoInput: videoInput\n        });\n      }\n\n      if (!isInlineRecordingSupported) {\n        return renderUnsupportedView();\n      }\n\n      if (thereWasAnError) {\n        return renderErrorView({\n          error: error\n        });\n      }\n\n      if (isCameraOn) {\n        // Enable switch camera button, only if not recording and multiple video sources available\n        var switchCameraControl = availableDeviceIds && availableDeviceIds.length >= 2 && !isRecording ? /*#__PURE__*/_react[\"default\"].createElement(_switchCameraView[\"default\"], {\n          onClick: this.handleSwitchCamera\n        }) : null;\n        return /*#__PURE__*/_react[\"default\"].createElement(CameraView, {\n          key: \"camera\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(Video, {\n          isFlipped: this.props.isFlipped,\n          ref: function ref(el) {\n            return _this3.cameraVideo = el;\n          },\n          autoPlay: true,\n          muted: true,\n          playsInline: true\n        }), switchCameraControl);\n      }\n\n      if (isConnecting) {\n        return renderLoadingView();\n      }\n\n      return renderDisconnectedView();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state3 = this.state,\n          isVideoInputSupported = _this$state3.isVideoInputSupported,\n          isInlineRecordingSupported = _this$state3.isInlineRecordingSupported,\n          thereWasAnError = _this$state3.thereWasAnError,\n          isRecording = _this$state3.isRecording,\n          isCameraOn = _this$state3.isCameraOn,\n          streamIsReady = _this$state3.streamIsReady,\n          isConnecting = _this$state3.isConnecting,\n          isRunningCountdown = _this$state3.isRunningCountdown,\n          isReplayingVideo = _this$state3.isReplayingVideo,\n          isReplayVideoMuted = _this$state3.isReplayVideoMuted;\n      var _this$props3 = this.props,\n          countdownTime = _this$props3.countdownTime,\n          timeLimit = _this$props3.timeLimit,\n          showReplayControls = _this$props3.showReplayControls,\n          replayVideoAutoplayAndLoopOff = _this$props3.replayVideoAutoplayAndLoopOff,\n          renderActions = _this$props3.renderActions,\n          t = _this$props3.t,\n          useVideoInput = _this$props3.useVideoInput,\n          wrapperClassName = _this$props3.wrapperClassName;\n      return /*#__PURE__*/_react[\"default\"].createElement(Wrapper, {\n        className: wrapperClassName\n      }, this.renderCameraView(), renderActions({\n        t: t,\n        isVideoInputSupported: isVideoInputSupported,\n        isInlineRecordingSupported: isInlineRecordingSupported,\n        thereWasAnError: thereWasAnError,\n        isRecording: isRecording,\n        isCameraOn: isCameraOn,\n        streamIsReady: streamIsReady,\n        isConnecting: isConnecting,\n        isRunningCountdown: isRunningCountdown,\n        isReplayingVideo: isReplayingVideo,\n        isReplayVideoMuted: isReplayVideoMuted,\n        countdownTime: countdownTime,\n        timeLimit: timeLimit,\n        showReplayControls: showReplayControls,\n        replayVideoAutoplayAndLoopOff: replayVideoAutoplayAndLoopOff,\n        useVideoInput: useVideoInput,\n        onTurnOnCamera: function onTurnOnCamera() {\n          return _this4.turnOnCamera();\n        },\n        onSwitchCamera: this.handleSwitchCamera,\n        onTurnOffCamera: this.turnOffCamera,\n        onOpenVideoInput: this.handleOpenVideoInput,\n        onStartRecording: this.handleStartRecording,\n        onStopRecording: this.handleStopRecording,\n        onPauseRecording: this.handlePauseRecording,\n        onResumeRecording: this.handleResumeRecording,\n        onStopReplaying: this.handleStopReplaying\n      }));\n    }\n  }]);\n\n  return VideoRecorder;\n}(_react.Component);\n\nexports[\"default\"] = VideoRecorder;\n\n_defineProperty(VideoRecorder, \"propTypes\", {\n  /** Whether or not to start the camera initially */\n  isOnInitially: _propTypes[\"default\"].bool,\n\n  /** Whether or not to display the video flipped (makes sense for user facing camera) */\n  isFlipped: _propTypes[\"default\"].bool,\n\n  /** Pass this if you want to force a specific mime-type for the video */\n  mimeType: _propTypes[\"default\"].string,\n\n  /** How much time to wait until it starts recording (in ms) */\n  countdownTime: _propTypes[\"default\"].number,\n\n  /** Use this if you want to set a time limit for the video (in ms) */\n  timeLimit: _propTypes[\"default\"].number,\n\n  /** Use this if you want to show play/pause/etc. controls on the replay video */\n  showReplayControls: _propTypes[\"default\"].bool,\n\n  /** Use this to turn off autoplay and looping of the replay video. It is recommended to also showReplayControls in order to play */\n  replayVideoAutoplayAndLoopOff: _propTypes[\"default\"].bool,\n\n  /** Use this if you want to customize the constraints passed to getUserMedia() */\n  constraints: _propTypes[\"default\"].shape({\n    audio: _propTypes[\"default\"].any,\n    video: _propTypes[\"default\"].any\n  }),\n  chunkSize: _propTypes[\"default\"].number,\n  dataAvailableTimeout: _propTypes[\"default\"].number,\n  useVideoInput: _propTypes[\"default\"].bool,\n\n  /** Use this to configure the replaying video element's controlslist attribute */\n  videoControlsList: _propTypes[\"default\"].string,\n\n  /** Use this to disable picture in picture mode on the replaying video element */\n  disablePictureInPicture: _propTypes[\"default\"].bool,\n  renderDisconnectedView: _propTypes[\"default\"].func,\n  renderLoadingView: _propTypes[\"default\"].func,\n  renderVideoInputView: _propTypes[\"default\"].func,\n  renderUnsupportedView: _propTypes[\"default\"].func,\n  renderErrorView: _propTypes[\"default\"].func,\n  renderActions: _propTypes[\"default\"].func,\n  cameraViewClassName: _propTypes[\"default\"].string,\n  videoClassName: _propTypes[\"default\"].string,\n  wrapperClassName: _propTypes[\"default\"].string,\n\n  /** Use this to localize the texts */\n  t: _propTypes[\"default\"].func,\n  onCameraOn: _propTypes[\"default\"].func,\n  onTurnOnCamera: _propTypes[\"default\"].func,\n  onSwitchCamera: _propTypes[\"default\"].func,\n  onTurnOffCamera: _propTypes[\"default\"].func,\n  onStartRecording: _propTypes[\"default\"].func,\n  onStopRecording: _propTypes[\"default\"].func,\n  onPauseRecording: _propTypes[\"default\"].func,\n  onResumeRecording: _propTypes[\"default\"].func,\n  onRecordingComplete: _propTypes[\"default\"].func,\n  onOpenVideoInput: _propTypes[\"default\"].func,\n  onStopReplaying: _propTypes[\"default\"].func,\n  onError: _propTypes[\"default\"].func\n});\n\n_defineProperty(VideoRecorder, \"defaultProps\", {\n  renderUnsupportedView: function renderUnsupportedView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_unsupportedView[\"default\"], null);\n  },\n  renderErrorView: function renderErrorView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_errorView[\"default\"], null);\n  },\n  renderVideoInputView: function renderVideoInputView(_ref2) {\n    var videoInput = _ref2.videoInput;\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, videoInput);\n  },\n  renderDisconnectedView: function renderDisconnectedView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_disconnectedView[\"default\"], null);\n  },\n  renderLoadingView: function renderLoadingView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_loadingView[\"default\"], null);\n  },\n  t: function t(x) {\n    return x;\n  },\n  renderActions: _renderActions[\"default\"],\n  isFlipped: true,\n  countdownTime: 3000,\n  constraints: CONSTRAINTS,\n  chunkSize: 250,\n  dataAvailableTimeout: 500\n});"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}