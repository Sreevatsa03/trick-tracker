{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.captureThumb = void 0;\nvar captureThumb = function captureThumb(videoTag) {\n  return new Promise(function (resolve, reject) {\n    var canvas = document.createElement('canvas');\n    canvas.width = videoTag.videoWidth;\n    canvas.height = videoTag.videoHeight;\n    canvas.getContext('2d').drawImage(videoTag, 0,\n    // top\n    0,\n    // left\n    videoTag.videoWidth, videoTag.videoHeight);\n    canvas.toBlob(function (thumbnail) {\n      resolve(thumbnail);\n    }, 'image/jpeg');\n  });\n};\nexports.captureThumb = captureThumb;\nvar getVideoInfo = function getVideoInfo(videoBlob) {\n  return new Promise(function (resolve, reject) {\n    var videoTag = document.createElement('video');\n    videoTag.preload = 'metadata';\n    videoTag.muted = true;\n    videoTag.defaultMuted = true;\n    videoTag.playsInline = true;\n    videoTag.autoplay = true;\n    var resolved = false;\n    var handleTimeout = function handleTimeout() {\n      resolved = true;\n      resolve({\n        duration: null,\n        thumbnail: null\n      });\n      videoTag.removeEventListener && videoTag.removeEventListener('loadeddata', handleLoadedData);\n      window.URL.revokeObjectURL(videoTag.src);\n    };\n    var timeout = setTimeout(handleTimeout, 1000);\n    var handleVideoTag = function handleVideoTag(duration) {\n      captureThumb(videoTag).then(function (thumbnail) {\n        videoTag.pause();\n        if (!resolved) {\n          clearTimeout(timeout);\n          resolved = true;\n          resolve({\n            duration: duration,\n            thumbnail: thumbnail\n          });\n        }\n        window.URL.revokeObjectURL(videoTag.src);\n      })[\"catch\"](function (err) {\n        if (!resolved) {\n          clearTimeout(timeout);\n          resolved = true;\n          reject(err);\n        }\n      });\n    };\n    var handleLoadedData = function handleLoadedData() {\n      var duration = videoTag.duration * 1000;\n      if (videoTag.duration === Infinity) {\n        videoTag.currentTime = Number.MAX_SAFE_INTEGER;\n        videoTag.ontimeupdate = function () {\n          videoTag.ontimeupdate = null;\n          duration = videoTag.duration * 1000;\n          videoTag.currentTime = 0;\n          handleVideoTag(duration);\n        };\n      } else {\n        handleVideoTag(duration);\n      }\n    };\n    videoTag.addEventListener('loadeddata', handleLoadedData);\n    videoTag.src = window.URL.createObjectURL(videoBlob);\n  });\n};\nvar _default = getVideoInfo;\nexports[\"default\"] = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","captureThumb","videoTag","Promise","resolve","reject","canvas","document","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","toBlob","thumbnail","getVideoInfo","videoBlob","preload","muted","defaultMuted","playsInline","autoplay","resolved","handleTimeout","duration","removeEventListener","handleLoadedData","window","URL","revokeObjectURL","src","timeout","setTimeout","handleVideoTag","then","pause","clearTimeout","err","Infinity","currentTime","Number","MAX_SAFE_INTEGER","ontimeupdate","addEventListener","createObjectURL","_default"],"sources":["/Users/ruchireddy/Downloads/trick-tracker/node_modules/react-video-recorder/lib/get-video-info.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.captureThumb = void 0;\n\nvar captureThumb = function captureThumb(videoTag) {\n  return new Promise(function (resolve, reject) {\n    var canvas = document.createElement('canvas');\n    canvas.width = videoTag.videoWidth;\n    canvas.height = videoTag.videoHeight;\n    canvas.getContext('2d').drawImage(videoTag, 0, // top\n    0, // left\n    videoTag.videoWidth, videoTag.videoHeight);\n    canvas.toBlob(function (thumbnail) {\n      resolve(thumbnail);\n    }, 'image/jpeg');\n  });\n};\n\nexports.captureThumb = captureThumb;\n\nvar getVideoInfo = function getVideoInfo(videoBlob) {\n  return new Promise(function (resolve, reject) {\n    var videoTag = document.createElement('video');\n    videoTag.preload = 'metadata';\n    videoTag.muted = true;\n    videoTag.defaultMuted = true;\n    videoTag.playsInline = true;\n    videoTag.autoplay = true;\n    var resolved = false;\n\n    var handleTimeout = function handleTimeout() {\n      resolved = true;\n      resolve({\n        duration: null,\n        thumbnail: null\n      });\n      videoTag.removeEventListener && videoTag.removeEventListener('loadeddata', handleLoadedData);\n      window.URL.revokeObjectURL(videoTag.src);\n    };\n\n    var timeout = setTimeout(handleTimeout, 1000);\n\n    var handleVideoTag = function handleVideoTag(duration) {\n      captureThumb(videoTag).then(function (thumbnail) {\n        videoTag.pause();\n\n        if (!resolved) {\n          clearTimeout(timeout);\n          resolved = true;\n          resolve({\n            duration: duration,\n            thumbnail: thumbnail\n          });\n        }\n\n        window.URL.revokeObjectURL(videoTag.src);\n      })[\"catch\"](function (err) {\n        if (!resolved) {\n          clearTimeout(timeout);\n          resolved = true;\n          reject(err);\n        }\n      });\n    };\n\n    var handleLoadedData = function handleLoadedData() {\n      var duration = videoTag.duration * 1000;\n\n      if (videoTag.duration === Infinity) {\n        videoTag.currentTime = Number.MAX_SAFE_INTEGER;\n\n        videoTag.ontimeupdate = function () {\n          videoTag.ontimeupdate = null;\n          duration = videoTag.duration * 1000;\n          videoTag.currentTime = 0;\n          handleVideoTag(duration);\n        };\n      } else {\n        handleVideoTag(duration);\n      }\n    };\n\n    videoTag.addEventListener('loadeddata', handleLoadedData);\n    videoTag.src = window.URL.createObjectURL(videoBlob);\n  });\n};\n\nvar _default = getVideoInfo;\nexports[\"default\"] = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}